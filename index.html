<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome - Helping Hands</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
    <!-- Google Sign-In -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        .split-screen {
            display: flex;
            min-height: 100vh;
            background: var(--bg-primary);
        }

        .split-left {
            flex: 1;
            background: linear-gradient(135deg, #5b21b6 0%, #0891b2 50%, #10b981 100%);
            background-size: 200% 200%;
            animation: gradientShift 15s ease infinite;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem;
            position: relative;
            overflow: hidden;
        }

        .split-left::before {
            content: '';
            position: absolute;
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            top: -300px;
            right: -300px;
            animation: float 8s ease-in-out infinite;
        }

        .split-left::after {
            content: '';
            position: absolute;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            bottom: -200px;
            left: -200px;
            animation: floatSlow 10s ease-in-out infinite;
        }

        .quote-container {
            position: relative;
            z-index: 1;
            text-align: center;
            max-width: 600px;
        }

        .quote-icon {
            font-size: 4rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 2rem;
            animation: float 3s ease-in-out infinite;
        }

        .quote-text {
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            line-height: 1.3;
            margin-bottom: 1.5rem;
            font-family: var(--font-heading);
            animation: slideUp 0.8s ease-out;
        }

        .quote-author {
            font-size: 1.25rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 500;
            animation: slideUp 1s ease-out;
        }

        .impact-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 2rem;
            margin-top: 3rem;
            animation: slideUp 1.2s ease-out;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 800;
            color: white;
            font-family: var(--font-heading);
        }

        .stat-label {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 0.5rem;
        }

        .split-right {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 4rem;
            background: var(--bg-primary);
            position: relative;
        }

        .login-container {
            width: 100%;
            max-width: 480px;
            animation: slideInRight 0.8s ease-out;
        }

        .login-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: var(--radius);
            padding: 3rem;
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-xl);
        }

        .logo-container {
            text-align: center;
            margin-bottom: 2rem;
        }

        .logo-icon {
            font-size: 4rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: pulse 2s infinite;
        }

        .login-title {
            font-size: 2rem;
            font-weight: 800;
            text-align: center;
            margin-bottom: 0.5rem;
            background: var(--gradient-hero);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .login-subtitle {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
            font-size: 1.125rem;
        }

        .role-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .role-btn {
            padding: 1rem;
            background: rgba(139, 92, 246, 0.1);
            border: 2px solid rgba(139, 92, 246, 0.2);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-base);
            text-align: center;
        }

        .role-btn:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: var(--neon-purple);
            transform: translateY(-2px);
        }

        .role-btn.active {
            background: var(--gradient-primary);
            border-color: var(--neon-purple);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.5);
        }

        .role-btn i {
            font-size: 1.5rem;
            display: block;
            margin-bottom: 0.5rem;
            color: var(--neon-purple);
        }

        .role-btn.active i {
            color: white;
        }

        .role-btn span {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .role-btn.active span {
            color: white;
        }

        .social-login {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(139, 92, 246, 0.2);
        }

        .social-btn {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .social-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--neon-purple);
            transform: translateY(-2px);
        }

        .divider {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 2rem 0;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: rgba(139, 92, 246, 0.2);
        }

        .divider span {
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        .story-animation-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 1.5rem;
            max-width: 400px;
            margin: 2rem auto 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: var(--shadow-lg);
        }

        .story-frame {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .story-content-box {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            text-align: left;
            min-height: 80px;
        }

        .story-icon-large {
            width: 60px;
            height: 60px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            color: white;
            flex-shrink: 0;
            box-shadow: 0 0 20px rgba(91, 75, 255, 0.4);
            animation: pulse 2s infinite;
        }

        .story-text-box h4 {
            margin: 0;
            font-weight: 700;
            color: white;
        }

        .story-text-box p {
            margin: 0.25rem 0 0;
            font-size: 0.875rem;
        }

        .story-progress-dots {
            display: flex;
            gap: 0.5rem;
        }

        .story-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .story-dot.active {
            background: var(--primary-blue);
            transform: scale(1.3);
            box-shadow: 0 0 10px var(--primary-blue);
        }

        @media (max-width: 968px) {
            .split-screen {
                flex-direction: column;
            }

            .split-left {
                min-height: 40vh;
                padding: 2rem;
            }

            .quote-text {
                font-size: 1.75rem;
            }

            .impact-stats {
                gap: 1.5rem;
            }

            .stat-number {
                font-size: 2rem;
            }

            .split-right {
                padding: 2rem;
            }

            .role-selector {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="split-screen">
        <!-- Left Side: Emotional Quote & Impact -->
        <div class="split-left">
            <div class="quote-container">
                <div class="quote-icon">
                    <i class="fas fa-hand-holding-heart"></i>
                </div>
                <div class="quote-text">
                    "Small Help. Real Dignity. Instant Impact."
                </div>
                <div class="quote-author">
                    Connecting people in need with real opportunities, food, and support
                </div>

                <!-- Animated Counters -->
                <div class="impact-stats">
                    <div class="stat-item">
                        <div class="stat-number counter-animate" data-target="1247">0</div>
                        <div class="stat-label">People Helped</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number counter-animate" data-target="856">0</div>
                        <div class="stat-label">Tasks Completed</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number counter-animate" data-target="2340">0</div>
                        <div class="stat-label">Meals Provided</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number counter-animate" data-target="125000">0</div>
                        <div class="stat-label">Funds Raised</div>
                    </div>
                </div>

                <!-- Floating Animated Icons -->
                <div style="display: flex; justify-content: center; gap: 2rem; margin-top: 2rem;">
                    <div class="float-icon" style="font-size: 2.5rem; opacity: 0.8;">üç≤</div>
                    <div class="float-icon" style="font-size: 2.5rem; opacity: 0.8;">üõ†Ô∏è</div>
                    <div class="float-icon" style="font-size: 2.5rem; opacity: 0.8;">‚ù§Ô∏è</div>
                    <div class="float-icon" style="font-size: 2.5rem; opacity: 0.8;">üí∞</div>
                </div>

                <!-- Medical Volunteer Support Section -->
                <div class="medical-section animate-slideUp"
                    style="animation-delay: 1.1s; margin-top: 2rem; background: rgba(8, 145, 178, 0.15); padding: 2rem; border-radius: var(--radius); border: 1px solid rgba(8, 145, 178, 0.3); backdrop-filter: blur(10px);">
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                        <i class="fas fa-hand-holding-medical" style="font-size: 2rem; color: #67e8f9;"></i>
                        <h3 style="color: white; margin: 0;">Medical Volunteer Support</h3>
                    </div>
                    <p
                        style="color: rgba(255, 255, 255, 0.9); font-size: 1rem; margin-bottom: 1.5rem; line-height: 1.5;">
                        Connecting medical students with those in need. Join as a volunteer or request basic medical
                        support and care.
                    </p>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-bottom: 1.5rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 800; color: #bef264;" id="medTasksDone">0</div>
                            <div
                                style="font-size: 0.65rem; color: rgba(255, 255, 255, 0.7); text-transform: uppercase; letter-spacing: 1px;">
                                Tasks Completed</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 1.5rem; font-weight: 800; color: #67e8f9;" id="medVolunteers">0</div>
                            <div
                                style="font-size: 0.65rem; color: rgba(255, 255, 255, 0.7); text-transform: uppercase; letter-spacing: 1px;">
                                Active Volunteers</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-primary"
                            style="flex: 1; background: var(--gradient-secondary); border: none; font-size: 0.85rem;"
                            onclick="window.location.href='register.html?role=MedicalVolunteer'">
                            <i class="fas fa-user-plus"></i> Join as Volunteer
                        </button>
                        <button class="btn btn-outline"
                            style="flex: 1; border-color: #67e8f9; color: #67e8f9; font-size: 0.85rem;"
                            onclick="showPublicMedicalRequestModal()">
                            <i class="fas fa-heartbeat"></i> Request Help
                        </button>
                    </div>
                </div>

                <!-- Emotional Story Animation -->
                <div class="story-animation-container mt-8 animate-zoomIn" style="animation-delay: 1.5s;">
                    <div id="story-animation" class="story-frame">
                        <div class="story-content-box">
                            <div class="story-icon-large" id="story-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <div class="story-text-box">
                                <h4 id="story-title">Looking for Hope</h4>
                                <p id="story-desc" class="text-sm opacity-80">Many start their journey with nothing but
                                    a desire to work.</p>
                            </div>
                        </div>
                        <div class="story-progress-dots">
                            <span class="story-dot active"></span>
                            <span class="story-dot"></span>
                            <span class="story-dot"></span>
                            <span class="story-dot"></span>
                            <span class="story-dot"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Side: Login Form -->
        <div class="split-right">
            <div class="login-container">
                <div class="login-card">
                    <div class="logo-container">
                        <div class="logo-icon">
                            <i class="fas fa-hand-holding-heart"></i>
                        </div>
                    </div>

                    <h1 class="login-title">Welcome Back</h1>
                    <p class="login-subtitle">Continue your journey of verified impact</p>

                    <!-- Role Selector -->
                    <div class="role-selector">
                        <div class="role-btn active" data-role="volunteer">
                            <i class="fas fa-user-friends"></i>
                            <span>Volunteer</span>
                        </div>
                        <div class="role-btn" data-role="sponsor">
                            <i class="fas fa-hand-holding-usd"></i>
                            <span>Sponsor</span>
                        </div>
                    </div>

                    <form onsubmit="event.preventDefault(); handleLogin(this);">
                        <div class="form-group">
                            <label class="form-label">Email Address</label>
                            <input type="email" name="email" class="form-input" placeholder="volunteer@helpinghands.org"
                                required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" name="password" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                        </div>

                        <button type="submit" class="btn btn-primary w-full">
                            <i class="fas fa-sign-in-alt"></i>
                            Sign In
                        </button>
                    </form>

                    <div class="divider">
                        <span>OR</span>
                    </div>

                    <button class="social-btn" onclick="handleGoogleSignIn()">
                        <i class="fab fa-google"></i>
                        Continue with Google
                    </button>

                    <div style="margin-top: 2rem; text-align: center; font-size: 0.9rem;">
                        <span style="color: var(--text-muted);">New to Helping Hands?</span>
                        <a href="register.html"
                            style="color: var(--neon-purple); font-weight: 600; margin-left: 0.5rem;">
                            Join the Movement
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Public Medical Request Modal -->
    <div id="publicMedicalRequestModal" class="modal"
        style="display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px);">
        <div class="modal-content card animate-zoomIn"
            style="margin: 5% auto; padding: 3rem; width: 90%; max-width: 550px; border: 1px solid rgba(139, 92, 246, 0.3);">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                <h2
                    style="margin: 0; background: var(--gradient-secondary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    <i class="fas fa-heartbeat"></i> Request Medical Help</h2>
                <i class="fas fa-times" style="cursor: pointer; font-size: 1.5rem; color: var(--text-muted);"
                    onclick="closePublicMedicalRequestModal()"></i>
            </div>
            <form id="publicMedicalRequestForm" onsubmit="handlePublicMedicalRequest(event)">
                <div class="form-group">
                    <label class="form-label">Type of Support Needed</label>
                    <select name="type" class="form-input" style="background: rgba(255,255,255,0.05);" required>
                        <option value="Basic Checkup">Basic Checkup</option>
                        <option value="Elderly Care">Elderly Care</option>
                        <option value="First Aid">First Aid</option>
                        <option value="Mother & Child Support">Mother & Child Support</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Urgency</label>
                    <select name="urgency" class="form-input" style="background: rgba(255,255,255,0.05);" required>
                        <option value="Low">Low (Can wait)</option>
                        <option value="Medium">Medium (Needed soon)</option>
                        <option value="High">High (Immediate attention)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Location</label>
                    <input type="text" name="location" class="form-input" placeholder="Where is help needed?" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Brief Description</label>
                    <textarea name="description" class="form-input" style="min-height: 100px;"
                        placeholder="Tell our volunteers how they can help..." required></textarea>
                </div>
                <button type="submit" class="btn btn-primary w-full"
                    style="margin-top: 1rem; background: var(--gradient-secondary);">
                    Submit Request
                </button>
            </form>
        </div>
    </div>

    <script src="js/script.js"></script>
    <script>
        function showPublicMedicalRequestModal() {
            document.getElementById('publicMedicalRequestModal').style.display = 'block';
        }
        function closePublicMedicalRequestModal() {
            document.getElementById('publicMedicalRequestModal').style.display = 'none';
        }
        function handlePublicMedicalRequest(e) {
            e.preventDefault();
            const form = e.target;
            const request = {
                type: form.type.value,
                urgency: form.urgency.value,
                location: form.location.value,
                description: form.description.value
            };
            App.Data.Medical.addRequest(request);
            alert('Your medical help request has been submitted to our volunteer network. Please stay safe.');
            closePublicMedicalRequestModal();
        }

        // ... existing script ...
        function animateCounter(element) {
            const target = parseInt(element.getAttribute('data-target'));
            const duration = 2000; // 2 seconds
            const increment = target / (duration / 16); // 60fps
            let current = 0;

            const updateCounter = () => {
                current += increment;
                if (current < target) {
                    element.textContent = Math.floor(current).toLocaleString();
                    requestAnimationFrame(updateCounter);
                } else {
                    element.textContent = target.toLocaleString();
                }
            };

            updateCounter();
        }

        // Initialize counters on page load
        window.addEventListener('DOMContentLoaded', () => {
            const counters = document.querySelectorAll('.counter-animate');
            setTimeout(() => {
                counters.forEach(counter => animateCounter(counter));

                // Animate medical counters
                const medStats = App.Data.Medical.getStats();
                const medTasksEl = document.getElementById('medTasksDone');
                const medVolsEl = document.getElementById('medVolunteers');

                if (medTasksEl) {
                    medTasksEl.setAttribute('data-target', medStats.completed + 42); // Seeded + actual
                    animateCounter(medTasksEl);
                }
                if (medVolsEl) {
                    medVolsEl.setAttribute('data-target', medStats.activeVolunteers + 12); // Seeded + actual
                    animateCounter(medVolsEl);
                }
            }, 500); // Start after 500ms delay

            // Story Animation Sequence
            const storyData = [
                {
                    title: "Looking for Hope",
                    desc: "Many start their journey with nothing but a desire to work.",
                    icon: "fa-search"
                },
                {
                    title: "Completing Tasks",
                    desc: "Helping Hands connects them with verified small tasks.",
                    icon: "fa-check-circle"
                },
                {
                    title: "Earning Dignity",
                    desc: "Completing tasks earns points and real support.",
                    icon: "fa-coins"
                },
                {
                    title: "Community Support",
                    desc: "Sponsors donate directly to verify impact stories.",
                    icon: "fa-hand-holding-heart"
                },
                {
                    title: "Life Transformed",
                    desc: "A meal, a kit, or a step toward a better future.",
                    icon: "fa-home"
                }
            ];

            let storyIndex = 0;
            const storyIcon = document.getElementById('story-icon').querySelector('i');
            const storyTitle = document.getElementById('story-title');
            const storyDesc = document.getElementById('story-desc');
            const storyDots = document.querySelectorAll('.story-dot');

            const nextStory = () => {
                storyIndex = (storyIndex + 1) % storyData.length;

                // Animate out
                const content = document.querySelector('.story-content-box');
                content.style.opacity = '0';
                content.style.transform = 'translateY(10px)';
                content.style.transition = 'all 0.5s ease';

                setTimeout(() => {
                    // Update content
                    storyIcon.className = `fas ${storyData[storyIndex].icon}`;
                    storyTitle.textContent = storyData[storyIndex].title;
                    storyDesc.textContent = storyData[storyIndex].desc;

                    // Update dots
                    storyDots.forEach((dot, idx) => {
                        dot.classList.toggle('active', idx === storyIndex);
                    });

                    // Animate in
                    content.style.opacity = '1';
                    content.style.transform = 'translateY(0)';
                }, 500);
            };

            setInterval(nextStory, 4000); // Change story every 4 seconds
        });

        // Role selector
        document.querySelectorAll('.role-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                document.querySelectorAll('.role-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Login handler
        function handleLogin(form) {
            const email = form.email.value;
            const password = form.password.value;
            const role = document.querySelector('.role-btn.active').dataset.role;

            // Show loading
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<div class="loading-dots"><span></span><span></span><span></span></div>';
            submitBtn.disabled = true;

            // Simulate loading
            setTimeout(() => {
                App.Auth.login(email, password);
            }, 800);
        }

        // Google Sign-In handler
        function handleGoogleSignIn() {
            // Get selected role from UI
            const roleKey = document.querySelector('.role-btn.active').dataset.role;
            const formattedRole = roleKey.charAt(0).toUpperCase() + roleKey.slice(1); // 'Volunteer' or 'Sponsor'

            // Auto-generate user for one-click access
            const timestamp = Date.now().toString().slice(-4);
            const mockGoogleUser = {
                name: `Guest User ${timestamp}`,
                email: `guest${timestamp}@gmail.com`,
                password: 'google-oauth-demo',
                role: formattedRole, // Use selected role
                googleAuth: true
            };

            // Create new Google user - App.Auth.signUp handles storage and redirection
            // We use signUp directly because we want to force a new session or login immediately
            // Since we generate a new email every time (or we could use a fixed one), let's use a fixed one for "Demo User" to persist data if they come back

            checkAndLogin('demo.user@gmail.com', formattedRole);
        }

        function checkAndLogin(email, role) {
            const users = JSON.parse(localStorage.getItem('hh_users') || '[]');
            const existingUser = users.find(u => u.email === email);

            if (existingUser) {
                // Determine dashboard
                const targetDash = existingUser.role === 'Sponsor' ? 'sponsor_dashboard.html' : 'volunteer_dashboard.html';

                // Login
                localStorage.setItem('hh_currentUser', JSON.stringify(existingUser));
                window.location.href = targetDash;
            } else {
                // Register and Redirect (App.Auth.signUp handles redirect)
                App.Auth.signUp('Demo User', email, 'demo123', role);
            }
        }
    </script>
</body>

</html>